@model CartViewModel
@{
    ViewData["Title"] = "Cart Page";
}

<div class="text-center">
    @if(Model == null)
    {
        <h2>Корзина пуста</h2>
    }
    else
    {
        <table class="table">
            <tr>
                <th>Игра</th>
                <th>Цена, руб</th>
                <th>Кол-во копий</th>
                <th>Стоимость, руб</th>
            </tr>
            @foreach(CartItemViewModel item in Model.CartItems)
            {
                <tr>
                    <td>@item.Product.Name</td>
                    <td>@item.Product.Cost</td>
                    <td>@item.Amount</td>
                    <td>Цена: @item.Cost</td>
                    <td><a asp-controller="Cart" asp-action="Add" asp-route-productId="@item.Product.Id" class="btn btn-primary">+</a></td>
                    <td><a asp-controller="Cart" asp-action="Delete" asp-route-productId="@item.Product.Id" class="btn btn-primary">-</a></td>
                </tr>
            }
        </table>

        <h3>Итоговая сумма: @Model.Cost руб.</h3>
        
        <!-- Кнопка-триггер модального окна -->
		<a href="#" type="button" class="col-2 btn btn-danger mt-3" data-toggle="modal" data-target="#exampleModal">Очистить корзину</a>

		<!-- Modal -->
		<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					Вы уверены, что хотите очистить корзину?
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
					<a asp-controller="Cart" asp-action="Clear" type="button" class="btn btn-secondary">Подтвердить</a>
				</div>
			</div>
			</div>
		</div>
        <a asp-controller="Order" asp-action="Index" class="col-2 btn btn-success mt-3">Оформить заказ</a>
    }

</div>
